<!DOCTYPE html>

<html lang="en">

    <head>
        <script
          src="https://code.jquery.com/jquery-3.4.1.min.js"
          integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
          crossorigin="anonymous"></script>
        <link href="/static/hexes.css" rel="stylesheet">
        <link href="/static/players.css" rel="stylesheet">
    </head>

    <body onload="init()">
        <div class="hexrow">
            <div id="1" class="blue">
                <p class="p1">START</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div>
                <p class="p0"></p class="p0">
                <div></div>
                <div></div>
            </div>
            <div id="7" class="pink">
                <p class="p1">7</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div>
                <p class="p0"></p class="p0">
                <div></div>
                <div></div>
            </div>
            <div id="12" class="purple">
                <p class="p1">12, RISKY</p class="p1">
                <div></div>
                <div></div>
            </div>
        </div>

        <div class="hexrow">
            <div id="2" class="green">
                <p class="p1">2</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="3" class="pink">
                <p class="p1" id="3p">3</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="6" class="green">
                <p class="p1" class="green">6</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="8" class="purple">
                <p class="p1">8</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="11" class="pink">
                <p class="p1">11</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="13" class="blue">
                <p class="p1">13</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="16" class="purple">
                <p class="p1">16</p class="p1">
                <div></div>
                <div></div>
            </div>
        </div>

        <div class="hexrow">
            <div>
                <p class="p1">0</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="4" class="purple">
                <p class="p1">4</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="5" class="blue">
                <p class="p1">5, RISKY</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="9" class="blue">
                <p class="p1">9</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="10" class="green">
                <p class="p1">10</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="14" class="green">
                <p class="p1">14</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="15" class="pink">
                <p class="p1">15</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="17" class="blue">
                <p class="p1">17</p class="p1">
                <div></div>
                <div></div>
            </div>
            <div id="18" class="green">
                <p class="p1">FINISH</p class="p1">
                <div></div>
                <div></div>
            </div>
        </div>

        <div id="pin1" class="pin"></div>

        <form id="rolldice" action="/roll_dice" method="post">
            <!--{% if not session.user_id %}-->
            <!--    <button class="btn btn-primary" type="button">Roll the dice!</button>-->
            <!--{% else %}-->
            <button class="btn btn-primary" type="submit">Roll the dice!</button>
        </form>
        <br></br>
        <button onclick="movestart()">Back to start</button>

        <div id="player1" class="circleBase player1"></div>
        <div id="player2" class="circleBase player2"></div>
        <div id="player3" class="circleBase player3"></div>
        <div id="player4" class="circleBase player4"></div>
    </body>

    <script>
        function init() {
            var data = '{{ boarddata }}';
            document.getElementById("14").innerHTML = data;
            var length = 0;
            var maxlength = data.length;
            for (user in data) {
                document.getElementById("15").innerHTML = user;
                break;
                length += 1;
                if (length > 0) {
                var place1 = user["place"];
                move1(place1);
                }
                if (length > 1) {
                    var place2 = user["place"];
                    move2(place2);
                }
                if (length > 2) {
                    var place3 = user["place"];
                    move3(place3);
                }
                if (length > 3) {
                    var place4 = user["place"];
                    move4(place4);
                }
                if (maxlength == length) {
                    break;
                }
            }
        }

        $('#registerForm').submit(function() {
            $.get('/roll_dice?playerdata=' + playerdata);
        });

        function move(player, place){
            var pin = document.getElementById(place);
            var coor = pin.getBoundingClientRect();
            var d = document.getElementById(player);
            d.style.left = coor.left + "px";
            d.style.top = coor.top + 30 + "px";
            d.style.zIndex = 100;
            d.style.opacity = "1";
        }

        function move1(place1){
            move('player1', place1);
        }
        function move2(place2){
            move('player2', place2);
        }
        function move3(place3){
            move('player3', place3);
        }
        function move4(place4){
            move('player4', place4);
        }
        function movestart(){
            place0 = 1;
            var pin = document.getElementById(place0);
            var coor = pin.getBoundingClientRect();

            var d = document.getElementById('player1');
            d.style.left = coor.left + "px";
            d.style.top = coor.top + 30 + "px";
            d.style.zIndex = 100;

            var d = document.getElementById('player2');
            d.style.left = coor.left + "px";
            d.style.top = coor.top + 30 + "px";
            d.style.zIndex = 100;

            var d = document.getElementById('player3');
            d.style.left = coor.left + "px";
            d.style.top = coor.top + 30 + "px";
            d.style.zIndex = 100;

            var d = document.getElementById('player4');
            d.style.left = coor.left + "px";
            d.style.top = coor.top + 30 + "px";
            d.style.zIndex = 100;

            place1 = 1;
            place2 = 1;
            place3 = 1;
            place4 = 1;
        }
    </script>

</html>