{% extends "layout.html" %}

{% block title %}
    Question
{% endblock %}

    <!-- Check this site for understanding -->
    <!-- https://github.com/CodeExplainedRepo/Multiple-Choice-Quiz-JavaScript -->

{% block main %}
    <div id="container">
        <div id="quiz" style="display:contents">
            <subtitle id="question">{{ data[0]|safe }}</subtitle>
            <div action="/answer_check" id="choices">
                <button class="choice" id="A">{{ data[1]|safe }}</button>
                <button class="choice" id="B">{{ data[2]|safe }}</button>
                <button class="choice" id="C">{{ data[3]|safe }}</button>
                <button class="choice" id="D">{{ data[4]|safe }}</button>
            </div>
            <div id="timer">
                <div id="counter"></div>
            </div>
            <progress value="0" max="15" id="progress"></progess>
        </div>
    </div>

    <script>
        var timeleft = 15;
        var downloadTimer = setInterval(function() {
        document.getElementById("counter").innerHTML = timeleft;
        document.getElementById("progress").value = 15 - timeleft;
        timeleft -= 1;
            if(timeleft <= 0)
            {
                clearInterval(downloadTimer);
                alert("Time's up!");
                window.location.replace('/compute_turn/');
            }
        }, 1000);


        $('button').click(function()
        {
            var your_answer = this.id;
            $.get('/answer_check', {your_answer: your_answer}, function(response) {
                if (response == false)
                {
                    alert("Wrong answer!");
                    window.location.replace('/compute_turn/');
                }
                else
                {
                    alert("Well done!");
                    window.location.replace('/compute_turn/');
                }


            }
            );
        });
    </script>

{% endblock %}